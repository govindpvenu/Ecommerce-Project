
<body>

    <!-- tap on top start -->
    <div class="tap-top">
        <span class="lnr lnr-chevron-up"></span>
    </div>
    <!-- tap on tap end -->

    <!-- page-wrapper Start-->
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
        <%- include('../partials/header') %>
        <!-- Page Body Start-->
        <div class="page-body-wrapper">
            <%- include('../partials/sidebar') %>
            <!-- index body start -->
            <div class="page-body">
                <div class="container-fluid">
                    <div class="row">
                        <!-- chart caard section start -->
                        <div class="col-sm-6 col-xxl-3 col-lg-6">
                            <div class="main-tiles border-5 border-0  card-hover card o-hidden">
                                <div class="custome-1-bg b-r-4 card-body">
                                    <div class="media align-items-center static-top-widget">
                                        <div class="media-body p-0">
                                            <span class="m-0">Total Revenue</span>
                                            <h4 class="mb-0 counter">₹ <%= totalRevenue %>
                                                <span class="badge badge-light-primary grow">
                                                    <i data-feather="trending-up"></i>8.5%</span>
                                            </h4>
                                        </div>
                                        <div class="align-self-center text-center">
                                            <i class="ri-database-2-line"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-xxl-3 col-lg-6">
                            <div class="main-tiles border-5 card-hover border-0 card o-hidden">
                                <div class="custome-2-bg b-r-4 card-body">
                                    <div class="media static-top-widget">
                                        <div class="media-body p-0">
                                            <span class="m-0">Total Orders</span>
                                            <h4 class="mb-0 counter"><%= orderCount %>
                                                <span class="badge badge-light-danger grow">
                                                    <i data-feather="trending-down"></i>4.6</span>
                                            </h4>
                                        </div>
                                        <div class="align-self-center text-center">
                                            <i class="ri-shopping-bag-3-line"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-xxl-3 col-lg-6">
                            <div class="main-tiles border-5 card-hover border-0  card o-hidden">
                                <div class="custome-3-bg b-r-4 card-body">
                                    <div class="media static-tocap-widget">
                                        <div class="media-body p-0">
                                            <span class="m-0">Total Products</span>
                                            <h4 class="mb-0 counter"><%= productCount %>
                                                <a href="/admin/products/add-product" class="badge badge-light-secondary grow">
                                                    ADD NEW</a>
                                            </h4>
                                        </div>

                                        <div class="align-self-center text-center">
                                            <i class="ri-chat-3-line"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-xxl-3 col-lg-6">
                            <div class="main-tiles border-5 card-hover border-0 card o-hidden">
                                <div class="custome-4-bg b-r-4 card-body">
                                    <div class="media static-top-widget">
                                        <div class="media-body p-0">
                                            <span class="m-0">Total Customers</span>
                                            <h4 class="mb-0 counter"><%= userCount %>
                                                <span class="badge badge-light-success grow">
                                                    <i data-feather="trending-down"></i>3.5</span>
                                            </h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- chart card section End -->


                        <!-- Earning chart star-->
                        <div class="col-xl-6">
                            <div class="card o-hidden card-hover">
                                <div class="card-header border-0 pb-1">
                                    <div class="card-header-title">
                                        <h4>Revenue Report</h4>
                                    </div>
                                </div>
                                <div class="card-body p-0">
                                    <div id="report-chart"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Earning chart  end-->


                        <!-- New users  Start -->
                        <div class="col-xl-6 col-md-12">
                            <div class="card o-hidden card-hover">
                                <div class="card-header card-header-top card-header--2 px-0 pt-0">
                                    <div class="card-header-title">
                                        <h4>New Users </h4>
                                    </div>
                                </div>

                                <div class="card-body p-0">
                                    <div>
                                        <div class="table-responsive">
                                            <table class="best-selling-table w-image
                                            w-image
                                            w-image table border-0">
                                                <tbody>
                                                    <% newUsers.forEach(user => { %>
                                                     
                                                    <tr>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Name</h6>
                                                                <h5><%= user.name %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Phone</h6>
                                                                <h5>₹<%= user.phone %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Email</h6>
                                                                <h5><%= user.email %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Date join</h6>
                                                                <h5> <%= user.createdAt.toDateString() %></h5>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <% }) %>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--  New users Product End -->

                        <!-- Recently added  Start -->
                        <div class="col-xl-6 col-md-12">
                            <div class="card o-hidden card-hover">
                                <div class="card-header card-header-top card-header--2 px-0 pt-0">
                                    <div class="card-header-title">
                                        <h4>Recently added </h4>
                                    </div>
                                </div>

                                <div class="card-body p-0">
                                    <div>
                                        <div class="table-responsive">
                                            <table class="best-selling-table w-image
                                            w-image
                                            w-image table border-0">
                                                <tbody>
                                                    <% recentProducts.forEach(product => { %>
                                                     
                                                    <tr>
                                                        <td>
                                                            <div class="best-product-box">
                                                                <span class="order-image">
                                                                    <img height="60px" width="60px" src="/images/<%= product.images[0]%>"
                                                                        class="img-fluid" alt="users">
                                                                </span>
                                                                <h5>:</h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Title</h6>
                                                                <h5><%= product.title %></h5>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Status</h6>
                                                                <% if (product.stock_status ==="Available") { %>
                                                                    <h5 class="text-success"><%= product.stock_status %></h5>
                                                                <% } %>
                                                                <% if (product.stock_status ==="Not Available") { %>
                                                                        <h5 class="text-danger"><%= product.stock_status %></h5>
                                                                <% } %>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Price</h6>
                                                                <h5>₹<%= product.sales_price %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Stock left</h6>
                                                                <h5><%= product.quantity %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Type</h6>
                                                                <h5><%= product.product_type %></h5>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Size</h6>
                                                                <h5><%= product.size %></h5>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <% }) %>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--  Recently Product End -->

                        <!-- Recent orders start-->
                        <div class="col-xl-6">
                            <div class="card o-hidden card-hover">
                                <div class="card-header card-header-top card-header--2 px-0 pt-0">
                                    <div class="card-header-title">
                                        <h4>Recent Orders</h4>
                                    </div>

                                </div>

                                <div class="card-body p-0">
                                    <div>
                                        <div class="table-responsive">
                                            <table class="best-selling-table table border-0">
                                                <tbody>
                                                    <% recentOrders.forEach(order => { %>
                                                    <tr>
                                                        <td>
                                                            <div class="best-product-box">
                                                                <a class="d-block">
                                                                    <span class="order-image">
                                                                        <img height="60px" width="60px" src="/images/<%= order.products[0].productId.images[0]%>"
                                                                            class="img-fluid" alt="users">
                                                                    </span>
                                                                    </a>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Date Placed</h6>
                                                                <h5><%=  String(order.createdAt).slice(4, 16) %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Price</h6>
                                                                <h5>₹<%= order.totalAmount %></h5>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Order Status</h6>
                                                                <% if (order.orderStatus ==="SUCCESS") { %>
                                                                    <h5 class="text-success">Success</h5>
                                                                <% } %>
                                                                <% if (order.orderStatus ==="PENDING") { %>
                                                                    <h5 class="text-danger">Pending</h5>
                                                                <% } %>
                                                            </div>
                                                        </td>

                                                        <td>
                                                            <div class="product-detail-box">
                                                                <h6>Payment</h6>
                                                                <% if (order.paymentStatus ==="RECEIVED") { %>
                                                                    <h5 class="text-success">Paid</h5>
                                                                <% } %>
                                                                <% if (order.paymentStatus ==="PENDING") { %>
                                                                    <h5 class="text-danger">Unpaid</h5>
                                                                <% } %>

                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <% }) %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Recent orders end-->











                    </div>
                </div>
                <!-- Container-fluid Ends-->

            </div>
            <!-- index body end -->

        </div>
        <!-- Page Body End -->
    </div>
    <!-- page-wrapper End-->

    

<script>
    var chart = new ApexCharts(document.querySelector("#report-chart"), options)
chart.render()

//pie chart for visitors
var options = {
    series: [44, 55, 41, 17],
    labels: [
        "The Passersby",
        "The Occasionals",
        "The Regulars",
        "The Superfans",
    ],
    chart: {
        width: "100%",
        height: 275,
        type: "donut",
    },

    legend: {
        fontSize: "12px",
        position: "bottom",
        offsetX: 1,
        offsetY: -1,

        markers: {
            width: 10,
            height: 10,
        },

        itemMargin: {
            vertical: 2,
        },
    },

    colors: ["#28c870", "#ffa044", "#9e65c2", "#6670bd", "#FF9800"],

    plotOptions: {
        pie: {
            startAngle: -90,
            endAngle: 270,
        },
    },

    dataLabels: {
        enabled: false,
    },

    responsive: [
        {
            breakpoint: 1835,
            options: {
                chart: {
                    height: 245,
                },

                legend: {
                    position: "bottom",

                    itemMargin: {
                        horizontal: 5,
                        vertical: 1,
                    },
                },
            },
        },

        {
            breakpoint: 1388,
            options: {
                chart: {
                    height: 330,
                },

                legend: {
                    position: "bottom",
                },
            },
        },

        {
            breakpoint: 1275,
            options: {
                chart: {
                    height: 300,
                },

                legend: {
                    position: "bottom",
                },
            },
        },

        {
            breakpoint: 1158,
            options: {
                chart: {
                    height: 280,
                },

                legend: {
                    fontSize: "10px",
                    position: "bottom",
                    offsetY: 10,
                },
            },
        },

        {
            theme: {
                mode: "dark",
                palette: "palette1",
                monochrome: {
                    enabled: true,
                    color: "#255aee",
                    shadeTo: "dark",
                    shadeIntensity: 0.65,
                },
            },
        },

        {
            breakpoint: 598,
            options: {
                chart: {
                    height: 280,
                },

                legend: {
                    fontSize: "12px",
                    position: "bottom",
                    offsetX: 5,
                    offsetY: -5,

                    markers: {
                        width: 10,
                        height: 10,
                    },

                    itemMargin: {
                        vertical: 1,
                    },
                },
            },
        },
    ],
}
</script>
